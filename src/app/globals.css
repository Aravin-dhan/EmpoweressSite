@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --brand-primary: 109 40 217;
  --brand-secondary: 219 39 119;
  --brand-accent: 251 191 36;
  --brand-plum: 139 92 246;
  --color-background: #fdf8ff;
  --color-surface: #ffffff;
  --color-card: #f8f5fc;
  --color-foreground: #1e1b4b;
  --color-muted: #6b7280;
  --color-border: rgba(109, 40, 217, 0.15);
  --color-icon: #5b21b6;
  --color-tag-bg: rgba(109, 40, 217, 0.1);
  --color-tag-border: rgba(109, 40, 217, 0.3);
  --color-tag-text: #5b21b6;
  --gradient-hero: radial-gradient(circle at 20% 20%, rgba(139, 92, 246, 0.25), transparent 55%);
}

.dark {
  --brand-primary: 167 139 250;
  --brand-secondary: 244 114 182;
  --brand-accent: 255 216 111;
  --brand-plum: 196 181 253;
  --color-background: #0f0720;
  --color-surface: #17102e;
  --color-card: #1e1538;
  --color-foreground: #f3f4f6;
  --color-muted: #9ca3af;
  --color-border: rgba(167, 139, 250, 0.15);
  --color-icon: #e9d5ff;
  --color-tag-bg: rgba(167, 139, 250, 0.15);
  --color-tag-border: rgba(167, 139, 250, 0.4);
  --color-tag-text: #e9d5ff;
  --gradient-hero: radial-gradient(circle at 20% 20%, rgba(167, 139, 250, 0.15), transparent 55%);
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-[var(--color-background)] text-[var(--color-foreground)] antialiased font-sans;
    text-rendering: optimizeLegibility;
  }

  body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 100;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E");
  }

  ::selection {
    @apply bg-brand-primary/20 text-brand-primary;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-serif tracking-wide;
  }

  a {
    @apply transition-colors duration-200;
  }
}

@layer components {
  .card {
    @apply bg-[var(--color-card)] rounded-3xl border border-[var(--color-border)] shadow-subtle;
  }

  .prose {
    @apply prose-lg text-[var(--color-foreground)] max-w-none;
  }

  .prose p {
    @apply leading-normal text-[var(--color-foreground)] mb-4 text-justify;
    font-family: "Times New Roman", Times, serif;
    font-size: 1.125rem;
    line-height: 1.5;
  }

  /* Aggressive override for headings */
  .prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6 {
    text-decoration: none !important;
    border-bottom: none !important;
    font-weight: 600;
    color: var(--color-foreground);
    margin-top: 2em;
    margin-bottom: 0.75em;
  }

  .prose a {
    @apply text-brand-primary underline decoration-2 underline-offset-4 hover:text-brand-secondary transition-colors;
  }

  .prose blockquote {
    @apply relative border-l-0 pl-0 py-6 my-8 text-3xl text-center leading-relaxed text-[var(--color-foreground)] opacity-90;
    font-family: "Brush Script MT", "cursive";
  }

  .prose blockquote::before {
    content: none;
  }

  .font-calligraphy {
    font-family: "Brush Script MT", "cursive";
  }

  .prose ul,
  .prose ol {
    @apply my-6 leading-relaxed pl-6;
  }

  .prose li {
    @apply my-2 marker:text-brand-primary;
  }

  .prose img {
    @apply my-8 rounded-2xl;
  }

  .prose code {
    @apply bg-neutral-100 text-brand-primary px-1 py-0.5 rounded font-mono text-sm;
  }

  pre {
    @apply rounded-3xl border border-[var(--color-border)] bg-slate-950 text-slate-50;
  }

  pre code {
    @apply bg-transparent text-inherit;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .frosted {
    backdrop-filter: blur(20px);
    background-color: rgba(255, 255, 255, 0.8);
  }

  .dark .frosted {
    background-color: rgba(17, 24, 39, 0.85);
  }
}

@media print {
  body * {
    visibility: hidden;
  }
  
  #main-article, #main-article * {
    visibility: visible;
  }

  #main-article {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    margin: 0;
    padding: 0;
  }

  /* Hide specific elements within the article if needed, e.g., share buttons */
  .no-print {
    display: none !important;
  }
  
  /* Reset background and colors for print */
  body {
    background: white !important;
  }
}
